// SPDX-License-Identifier: UNLICENSED
pragma solidity >=0.8.0;

import { IERC20 } from "@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol";

interface IFlashBorrower {
  /// @notice The flashloan callback. `amount` + `fee` needs to repayed to msg.sender before this call returns.
  /// @param sender The address of the invoker of this flashloan.
  /// @param token The address of the token that is loaned.
  /// @param amount of the `token` that is loaned.
  /// @param fee The fee that needs to be paid on top for this loan. Needs to be the same as `token`.
  /// @param data Additional data that was passed to the flashloan function.
  function onFlashLoan(
    address sender,
    IERC20 token,
    uint256 amount,
    uint256 fee,
    bytes calldata data
  ) external;
}

interface IBentoBox {
  /// @notice Flashloan ability.
  /// @param borrower The address of the contract that implements and conforms to `IFlashBorrower` and handles the flashloan.
  /// @param receiver Address of the token receiver.
  /// @param token The address of the token to receive.
  /// @param amount of the tokens to receive.
  /// @param data The calldata to pass to the `borrower` contract.
  // F5 - Checks-Effects-Interactions pattern followed? (SWC-107)
  // F5: Not possible to follow this here, reentrancy has been reviewed
  // F6 - Check for front-running possibilities, such as the approve function (SWC-114)
  // F6: Slight grieving possible by withdrawing an amount before someone tries to flashloan close to the full amount.
  function flashLoan(
    IFlashBorrower borrower,
    address receiver,
    IERC20 token,
    uint256 amount,
    bytes calldata data
  ) external;
}
